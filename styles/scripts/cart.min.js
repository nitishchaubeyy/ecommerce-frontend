const cartItemsEl=document.getElementById("cartItems"),cartTotalEl=document.getElementById("cartTotal"),checkoutBtn=document.getElementById("checkoutBtn");let cart=JSON.parse(localStorage.getItem("cart"))||[];function updateCartCount(){const t=JSON.parse(localStorage.getItem("cart"))||[];let e=0;t.forEach(t=>{e+=t.quantity||0});const n=document.querySelector(".cart-icon .badge");n&&(n.textContent=e||0)}function calculateTotal(){const t=cart.reduce((t,e)=>t+(parseFloat(e.price)||0)*(e.quantity||1),0);cartTotalEl.textContent=t.toFixed(2)}function saveCartAndReload(){localStorage.setItem("cart",JSON.stringify(cart)),renderCart()}function removeItem(t){const e=cart[t];cart.splice(t,1),saveCartAndReload(),showToast(`‚ùå Removed ${e?.title||"item"}`)}function changeQuantity(t,e){cart[t].quantity=Math.max(1,(cart[t].quantity||1)+e),saveCartAndReload()}function renderCart(){if(cartItemsEl.innerHTML="",0===cart.length)return cartItemsEl.innerHTML="<p>Your cart is empty.</p>",checkoutBtn.disabled=!0,cartTotalEl.textContent="0.00",updateCartCount(),showToast("üõí Cart is now empty"),void 0;cart.forEach((t,e)=>{const n=document.createElement("div");n.className="cart-item";const a=t.title||"Untitled",i=t.image||"https://via.placeholder.com/80",r=t.size||"Default",c=parseFloat(t.price)||0,o=t.quantity||1;n.innerHTML=`<img src="${i}" alt="${a}" /><div class="item-info"><h3>${a}</h3><p>Size: ${r}</p><p>$${c}</p><div class="quantity-box"><button onclick="changeQuantity(${e}, -1)">‚àí</button><span>${o}</span><button onclick="changeQuantity(${e}, 1)">+</button></div><button class="remove-btn" onclick="removeItem(${e})">Remove</button></div>`,cartItemsEl.appendChild(n)}),calculateTotal(),updateCartCount(),checkoutBtn.disabled=!1}function showToast(t){const e=document.getElementById("toast");e&&(e.textContent=t,e.classList.add("show"),setTimeout(()=>{e.classList.remove("show")},2e3))}renderCart(),checkoutBtn.addEventListener("click",()=>{cart.length>0&&(window.location.href="checkout.html")});
